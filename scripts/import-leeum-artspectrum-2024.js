const { createClient } = require('@supabase/supabase-js');
const path = require('path');
const { v4: uuidv4 } = require('uuid');
require('dotenv').config({ path: path.join(__dirname, '../backend/.env') });

const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_SERVICE_KEY
);

async function importLeeumArtSpectrum2024() {
  console.log('ğŸ¨ ë¦¬ì›€ë¯¸ìˆ ê´€ 2024 ì•„íŠ¸ìŠ¤í™íŠ¸ëŸ¼ ã€Šë“œë¦¼ ìŠ¤í¬ë¦°ã€‹ ë°ì´í„° ì…ë ¥ ì‹œì‘...\n');
  
  try {
    const exhibitionData = {
      id: uuidv4(),
      
      // ê¸°ë³¸ ì •ë³´
      title_local: '2024 ì•„íŠ¸ìŠ¤í™íŠ¸ëŸ¼ ã€Šë“œë¦¼ ìŠ¤í¬ë¦°ã€‹',
      title_en: '2024 Art Spectrum: Dream Screen',
      subtitle: 'ì•„ì‹œì•„ ì‹ ì§„ì‘ê°€ 26ëª…/íŒ€ ì°¸ì—¬',
      
      // ë‚ ì§œ
      start_date: '2024-09-05',
      end_date: '2024-12-29',
      exhibition_type: 'special',
      status: 'closed', // ì´ë¯¸ ì¢…ë£Œëœ ì „ì‹œ
      
      // ì¥ì†Œ ì •ë³´
      venue_name: 'ë¦¬ì›€ë¯¸ìˆ ê´€',
      venue_city: 'ì„œìš¸',
      venue_country: 'KR',
      venue_address: 'ì„œìš¸íŠ¹ë³„ì‹œ ìš©ì‚°êµ¬ ì´íƒœì›ë¡œ55ê¸¸ 60, ë¸”ë™ë°•ìŠ¤, ê·¸ë¼ìš´ë“œê°¤ëŸ¬ë¦¬',
      
      // ì „ì‹œ ì„¤ëª…
      description: `êµ­ë‚´ ì‹ ì§„ì‘ê°€ ì§€ì› ì „ì‹œë¡œ ëª…ë§¥ì„ ì´ì–´ì˜¨ 'ì•„íŠ¸ìŠ¤í™íŠ¸ëŸ¼'ì´ ê¸‰ê²©í•˜ê²Œ ë³€í™”í•˜ëŠ” ë™ì‹œëŒ€ ë¯¸ìˆ  í˜„ì¥ì˜ íë¦„ì— ê±¸ë§ì€ ì „í™˜ì„ ê¾€í•©ë‹ˆë‹¤. ìˆ˜ìƒì œë¥¼ íì§€í•¨ìœ¼ë¡œì¨ ê²½ìŸ ì²´ì œë¥¼ íƒˆí”¼í•˜ê³ , ì°¸ì—¬ ì‘ê°€ì˜ ë²”ì£¼ë¥¼ êµ­ë‚´ì—ì„œ ì•„ì‹œì•„ë¡œ í™•ì¥í•´ ë‹¤ì–‘í•œ ë¬¸í™”ì , ì˜ˆìˆ ì  ë°°ê²½ì˜ êµ­ë‚´ ë° ì•„ì‹œì•„ ì°½ì‘ì 26ëª…/íŒ€ì´ í•¨ê»˜ í•˜ëŠ” êµë¥˜ì˜ ì¥ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

2024 ì•„íŠ¸ìŠ¤í™íŠ¸ëŸ¼ ã€Šë“œë¦¼ ìŠ¤í¬ë¦°ã€‹ì€ ë°€ë ˆë‹ˆì–¼ ì´í›„ ì„¸ëŒ€ê°€ ì¸í„°ë„·, ê²Œì„, ì˜í™” ë“± 'ìŠ¤í¬ë¦°'ì´ë¼ëŠ” ë§¤ê°œì²´ë¥¼ í†µí•œ ê²½í—˜ì„ ì²´í™”í•˜ë©´ì„œ ë¬¼ë¦¬ì ì¸ ì„¸ê³„ì— ëŒ€í•´ ì´ì „ê³¼ëŠ” ë‹¤ë¥¸ ê°ê°ì„ ê°–ê²Œ ëœ ì ì„ ê·¸ ì¶œë°œì ìœ¼ë¡œ ì‚¼ìŠµë‹ˆë‹¤.

[ì „ì‹œ ì»¨ì…‰]
ì „ì‹œ ì œëª©ì¸ "ë“œë¦¼ ìŠ¤í¬ë¦°"ì€ í—ˆêµ¬ì ì´ì§€ë§Œ ë³´ë‹¤ ê¹Šì€ ë¬´ì˜ì‹ì˜ ì˜ì—­ì„ ë“œëŸ¬ë‚´ëŠ” 'ê¿ˆ'ê³¼ ì§ê°„ì ‘ì ì¸ ê²½í—˜ì„ ì¤‘ê°œí•˜ëŠ” ë‹¤ì¢…ë‹¤ì–‘í•œ 'ìŠ¤í¬ë¦°'ì„ í•©ì„±í•œ í‘œí˜„ì´ì, ìŠ¤í¬ë¦° ë„ˆë¨¸ë¡œ ë– ì˜¤ë¥´ëŠ” í™˜ìƒì´ë‚˜ ì”ìƒì„ ì˜ë¯¸í•˜ëŠ” ì¡°ì–´ì…ë‹ˆë‹¤.

[ìœˆì²´ìŠ¤í„° í•˜ìš°ìŠ¤ ëª¨í‹°í”„]
19ì„¸ê¸° í›„ë°˜ì— ì§€ì–´ì§„ ë¯¸êµ­ ì‚°í˜¸ì„¸ ì†Œì¬ ìœˆì²´ìŠ¤í„° í•˜ìš°ìŠ¤ë¥¼ ëª¨í‹°í”„ë¡œ ì‚¼ì•„, ì´ê¸°ë¡œ ì¸í•´ ì‚¬ë§í•œ ì´ë“¤ì˜ í˜¼ì´ ì°¾ì•„ì˜¤ì§€ ëª»í•˜ë„ë¡ ë³µì¡í•˜ê³  ë…íŠ¹í•œ êµ¬ì¡°ë¡œ ì§€ì–´ì§„ 'ê·€ì‹  ë“¤ë¦° ì§‘'ì„ ì¬í˜„í–ˆìŠµë‹ˆë‹¤.

[ì „ì‹œ ê³µê°„ êµ¬ì„±]
â€¢ ë§ˆë‹¹, ì…êµ¬, ë³µë„, 20ì—¬ ê°œì˜ ë…ë¦½ì ì¸ ë°©ìœ¼ë¡œ êµ¬ì„±
â€¢ ë°©ì—ì„œ ë°©ìœ¼ë¡œ ì´ì–´ì§€ëŠ” êµ¬ì„±
â€¢ ë¯¸ë¡œ ê°™ì€ ë™ì„ ìœ¼ë¡œ ë°©í–¥ì„±ì˜ ìƒì‹¤ê³¼ ê³ ë¦½ê°ì„ í‘œí˜„
â€¢ ê°ìë§Œì˜ ê¸¸ì„ ì°¾ì•„ ì‘í’ˆì„ ê°ìƒí•˜ëŠ” ìƒˆë¡œìš´ ê²½í—˜ ì œì‹œ

[ì£¼ìš” í…Œë§ˆ]
â€¢ ìŠ¤í¬ë¦°ì„ í†µí•œ ê´‘ë²”ìœ„í•œ ì •ë³´ì™€ ê°ê° ìê·¹
â€¢ ë‹¤ì¤‘ì  ì„œì‚¬ë¥¼ í†µí•´ êµ¬ì„±, ê³µìœ ë˜ëŠ” ê³µí¬
â€¢ ê°€ê³µëœ ê³µí¬ë¥¼ ì‹œëŒ€ì  ì§•í›„ë¡œ í•´ì„
â€¢ ë¬¼ë¦¬ì , ì‹¬ë¦¬ì  ê³ ë¦½ ì„¸ê³„ì—ì„œì˜ ê´€ê³„ íƒìƒ‰

[ì‘í’ˆ íŠ¹ì§•]
â€¢ ì´ 60ì  ì¤‘ 23ì  ì‹ ì‘
â€¢ ì¸í„°ë„·, ì„œë¸Œì»¬ì²˜, ê²Œì„, ëŒ€ì¤‘ë¬¸í™” ê¸°ë°˜
â€¢ ì—­ì‚¬ì  ìœ ì‚°ì˜ ë™ì‹œëŒ€ì  í•´ì„
â€¢ ìŠ¤í¬ë¦° ì•ˆíŒì„ ì™•ë³µí•˜ëŠ” ì‘ì—…`,
      
      // ì‘ê°€ ì •ë³´ (26ëª…/íŒ€)
      artists: [
        'ìµœìœ¤', 'ëˆì„ í•„', 'ê¹€ëŒ€í™˜', 'í”„ë¦¬ì‹¤ë¼ ì •', 'ê°•ì •ì„', 'ê¹€í¬ì²œ',
        'ê¹€ë¬´ì˜', 'ì •ì§€í˜„', 'ì½œë¡ ', 'ì´ì€ìƒˆ', 'ë¦¬ ì´íŒ', 'ì†Œ ìœ  ëˆ„ì—',
        'ë°•ì„¸ì˜', 'íŒŒíŠ¸íƒ€ì„ìŠ¤ìœ„íŠ¸', 'ë¦¬ì•„ë¥´ ë¦¬ì˜ë””', 'ì½˜ì¹¸ ë£½ì‚¬ì™•',
        'ë¥˜í•œì†”', 'ìŠ¤íŒŒí´ë§ íƒ­ ì›Œí„°', 'ì¹´ëª¬ë½ ìˆ™ì°¨ì´', 'ì„ ë‹¤ì´ì–¼',
        'í›„ìœ íˆì½” ë‹¤ì¹´íƒ€', 'ì•„ë¥¼ë › ê¾¸ì‰-ì•ˆ ì§ ', 'ë³´ ì™•', 'ë¹„ë¹„ì•ˆ ì¥',
        'í—¤ ì§€ì¼€', 'ìŠ¤í…”ë¼ ì¢…'
      ],
      curator: 'ì „íš¨ê²½, ìœ ì§€ì›',
      
      // ì‘í’ˆ ì •ë³´
      artworks_count: 60,
      
      // ê´€ëŒ ì •ë³´
      admission_fee: 'ë³„ë„ ê³µì§€',
      operating_hours: JSON.stringify({
        ìš´ì˜ì‹œê°„: 'í™”-ì¼ 10:30-18:00',
        íœ´ê´€ì¼: 'ë§¤ì£¼ ì›”ìš”ì¼, 1ì›” 1ì¼, ì„¤ë‚ , ì¶”ì„',
        ì˜ˆì•½: 'ì˜¨ë¼ì¸ ì‚¬ì „ ì˜ˆì•½ í•„ìˆ˜'
      }),
      
      // ì—°ë½ì²˜
      contact_info: JSON.stringify({
        ë¬¸ì˜: '02-2014-6900',
        í™ˆí˜ì´ì§€: 'www.leeum.org'
      }),
      phone_number: '02-2014-6900',
      
      // URL ì •ë³´
      official_url: 'https://www.leeum.org',
      website_url: 'https://www.leeum.org',
      
      // ê¸°íƒ€ ì •ë³´ (DB ìŠ¤í‚¤ë§ˆì— ì—†ëŠ” í•„ë“œ ì œê±°)
      
      // ë°ì´í„° ë©”íƒ€ì •ë³´
      source: 'leeum_official',
      source_url: 'https://www.leeum.org',
      collected_at: new Date().toISOString(),
      
      // ê¸°ë³¸ê°’ ì„¤ì •
      view_count: 0,
      ai_verified: true,
      ai_confidence: 0.95
    };

    // ë°ì´í„° ì…ë ¥
    console.log('ğŸ“ ì „ì‹œ ë°ì´í„° ì…ë ¥ ì¤‘...');
    const { data, error } = await supabase
      .from('exhibitions')
      .insert([exhibitionData])
      .select();
    
    if (error) {
      throw error;
    }
    
    console.log('âœ… 2024 ì•„íŠ¸ìŠ¤í™íŠ¸ëŸ¼ ã€Šë“œë¦¼ ìŠ¤í¬ë¦°ã€‹ ë°ì´í„° ì…ë ¥ ì™„ë£Œ!');
    console.log('\nğŸ“‹ ì…ë ¥ëœ ì „ì‹œ ì •ë³´:');
    console.log(`  - ID: ${data[0].id}`);
    console.log(`  - ì œëª©: ${data[0].title_local}`);
    console.log(`  - ì°¸ì—¬ ì‘ê°€: ${data[0].artists.length}ëª…/íŒ€`);
    console.log(`  - ì¥ì†Œ: ${data[0].venue_name} (ë¸”ë™ë°•ìŠ¤, ê·¸ë¼ìš´ë“œê°¤ëŸ¬ë¦¬)`);
    console.log(`  - ê¸°ê°„: ${data[0].start_date} ~ ${data[0].end_date}`);
    console.log(`  - ì‘í’ˆìˆ˜: ${data[0].artworks_count}ì  (ì‹ ì‘ 23ì  í¬í•¨)`);
    console.log(`  - ìƒíƒœ: ${data[0].status} (ì¢…ë£Œ)`);
    console.log(`  - ì˜ˆìˆ ê°ë…: ë¦¬í¬ë¦¬íŠ¸ í‹°ë¼ë°”ë‹›`);
    console.log(`  - íë ˆì´í„°: ${data[0].curator}`);
    
    // ë¦¬ì›€ë¯¸ìˆ ê´€ 2024ë…„ ì „ì‹œ í˜„í™©
    console.log('\nğŸ” ë¦¬ì›€ë¯¸ìˆ ê´€ 2024ë…„ ì „ì‹œ í˜„í™©...');
    const { data: leeum2024, error: leeum2024Error } = await supabase
      .from('exhibitions')
      .select('title_local, artists, start_date, end_date, status')
      .eq('venue_name', 'ë¦¬ì›€ë¯¸ìˆ ê´€')
      .gte('start_date', '2024-01-01')
      .lt('start_date', '2025-01-01')
      .order('start_date', { ascending: true });
    
    if (!leeum2024Error && leeum2024) {
      console.log(`\nğŸ“… ë¦¬ì›€ë¯¸ìˆ ê´€ 2024ë…„ ì „ì‹œ: ${leeum2024.length}ê°œ`);
      leeum2024.forEach((ex, index) => {
        const artist = ex.artists && ex.artists.length > 0 ? ex.artists[0] : '';
        const statusIcon = ex.status === 'closed' ? 'âœ…' : 
                          ex.status === 'ongoing' ? 'ğŸ”„' : 'ğŸ“…';
        console.log(`${index + 1}. ${ex.title_local} ${artist ? `(${artist})` : ''} ${statusIcon}`);
        console.log(`   ${ex.start_date} ~ ${ex.end_date}`);
      });
    }
    
  } catch (error) {
    console.error('âŒ ë°ì´í„° ì…ë ¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error.message);
    if (error.details) console.error('ì„¸ë¶€ì‚¬í•­:', error.details);
  }
}

// ì‹¤í–‰
importLeeumArtSpectrum2024();