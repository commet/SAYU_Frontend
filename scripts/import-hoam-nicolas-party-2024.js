const { createClient } = require('@supabase/supabase-js');
const path = require('path');
const { v4: uuidv4 } = require('uuid');
require('dotenv').config({ path: path.join(__dirname, '../backend/.env') });

const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_SERVICE_KEY
);

async function importHoamNicolasParty2024() {
  console.log('ğŸ¨ í˜¸ì•”ë¯¸ìˆ ê´€ ã€Šë‹ˆì½œë¼ìŠ¤ íŒŒí‹°: ë”ìŠ¤íŠ¸ã€‹ ì „ì‹œ ë°ì´í„° ì…ë ¥ ì‹œì‘...\n');
  
  try {
    const exhibitionData = {
      id: uuidv4(),
      
      // ê¸°ë³¸ ì •ë³´
      title_local: 'ë‹ˆì½œë¼ìŠ¤ íŒŒí‹°: ë”ìŠ¤íŠ¸',
      title_en: 'Nicolas Party: DUST',
      subtitle: 'ìŠ¤ìœ„ìŠ¤ ì‘ê°€ ë‹ˆì½œë¼ìŠ¤ íŒŒí‹° ìµœëŒ€ ê·œëª¨ ì„œë² ì´ ì „ì‹œ',
      
      // ë‚ ì§œ
      start_date: '2024-08-31',
      end_date: '2025-01-19',
      exhibition_type: 'special',
      status: 'ongoing', // 2025ë…„ 1ì›”ê¹Œì§€ ì§„í–‰
      
      // ì¥ì†Œ ì •ë³´
      venue_name: 'í˜¸ì•”ë¯¸ìˆ ê´€',
      venue_city: 'ìš©ì¸',
      venue_country: 'KR',
      venue_address: 'ê²½ê¸°ë„ ìš©ì¸ì‹œ ì²˜ì¸êµ¬ í¬ê³¡ì ì—ë²„ëœë“œë¡œ 562ë²ˆê¸¸ 38',
      
      // ì „ì‹œ ì„¤ëª…
      description: `í˜¸ì•”ë¯¸ìˆ ê´€ì€ ìŠ¤ìœ„ìŠ¤ ì‘ê°€ ë‹ˆì½œë¼ìŠ¤ íŒŒí‹°ì˜ ì‘í’ˆì„¸ê³„ ì „ë°˜ì„ ì•„ìš°ë¥´ëŠ” ìµœëŒ€ ê·œëª¨ì˜ ì„œë² ì´ ì „ì‹œ ã€Šë”ìŠ¤íŠ¸ã€‹ë¥¼ ê°œìµœí•©ë‹ˆë‹¤. ì´ë²ˆ ì „ì‹œëŠ” ì‘ê°€ì˜ ê¸°ì¡´ íšŒí™” ë° ì¡°ê° 48ì , ì‹ ì‘ íšŒí™” 20ì , ì „ì‹œë¥¼ ìœ„í•´ íŠ¹ë³„íˆ ì œì‘ëœ íŒŒìŠ¤í…” ë²½í™” 5ì ì„ ë¦¬ì›€ì˜ ê³ ë¯¸ìˆ  ì†Œì¥í’ˆê³¼ í•¨ê»˜ ì„ ë³´ì…ë‹ˆë‹¤.

[ì‘ê°€ ë°°ê²½]
ë‹ˆì½œë¼ìŠ¤ íŒŒí‹°ëŠ” ìœ ë…„ ì‹œì ˆë¶€í„° ê·¸ë˜í”¼í‹°ë¥¼ ì²´í—˜í•˜ê³ , ëŒ€í•™ì—ì„œëŠ” ì˜í™”, ê·¸ë˜í”½ë””ìì¸, 3Dì• ë‹ˆë©”ì´ì…˜ì„ ì „ê³µí–ˆìŠµë‹ˆë‹¤. ì•„í‹°ìŠ¤íŠ¸ ê·¸ë£¹ì„ ê²°ì„±í•˜ì—¬ ë¯¸ìˆ , ìŒì•…, í¼í¬ë¨¼ìŠ¤ê°€ ìœµí•©ëœ ì „ì‹œì™€ ê³µì—°ì„ ë§Œë“¤ê¸°ë„ í–ˆìœ¼ë©°, ì´ëŸ¬í•œ ë‹¤ì›ì  ê²½í—˜ì€ ë²½í™”, ì±„ìƒ‰ ì¡°ê°, ì´ì²´ì  ì„¤ì¹˜ì™€ ì „ì‹œê¸°íšì„ í¬ê´„í•˜ëŠ” ì‘í’ˆ í™œë™ ì „ë°˜ì— ì˜í–¥ì„ ë¯¸ì¹˜ê³  ìˆìŠµë‹ˆë‹¤.

[ì „ì‹œ êµ¬ì„±]
â€¢ ê¸°ì¡´ íšŒí™” ë° ì¡°ê°: 48ì 
â€¢ ì‹ ì‘ íšŒí™”: 20ì   
â€¢ íŠ¹ë³„ ì œì‘ íŒŒìŠ¤í…” ë²½í™”: 5ì 
â€¢ ë¦¬ì›€ë¯¸ìˆ ê´€ ê³ ë¯¸ìˆ  ì†Œì¥í’ˆê³¼ì˜ í˜‘ì—… ì „ì‹œ

[ì£¼ìš” ë²½í™” ì‘í’ˆ]
ã€Šë™êµ´ã€‹ (2024) - ë²½ì— ì†Œí”„íŠ¸ íŒŒìŠ¤í…”, 380 x 908 cm
ã€Šë‚˜ë¬´ ê¸°ë‘¥ã€‹ (2024) - ë²½ì— ì†Œí”„íŠ¸ íŒŒìŠ¤í…”, 380 x 908 cm  
ã€Šì‚°ã€‹ (2024) - ë²½ì— ì†Œí”„íŠ¸ íŒŒìŠ¤í…”, 350 x 800 cm
ã€Šêµ¬ë¦„ã€‹ (2024) - ë²½ì— ì†Œí”„íŠ¸ íŒŒìŠ¤í…”, 350 x 800 cm

[ì‹ ì‘ ì´ˆìƒí™” ì‹œë¦¬ì¦ˆ]
ë¦¬ì›€ë¯¸ìˆ ê´€ ì†Œì¥ ã€Šì‹­ì¥ìƒë„ 10ê³¡ë³‘ã€‹ê³¼ ê¹€í™ë„ì˜ ã€Šêµ°ì„ ë„ã€‹ë¥¼ ì°¸ì¡°í•˜ì—¬ ìƒìƒì˜ íŒ”ì„ (å…«ä»™)ì„ í˜•ìƒí™”í•œ ì‹ ì‘ ì´ˆìƒ 8ì :
â€¢ ã€Šë‘ ë§ˆë¦¬ ê°œê°€ ìˆëŠ” ì´ˆìƒã€‹ (2024)
â€¢ ã€Šë³µìˆ­ì•„ê°€ ìˆëŠ” ì´ˆìƒã€‹ (2024) 
â€¢ ã€Šì‚¬ìŠ´ì´ ìˆëŠ” ì´ˆìƒã€‹ (2024)
â€¢ ã€Šì²­ìê°€ ìˆëŠ” ì´ˆìƒã€‹ (2024)
â€¢ ã€Šë²„ì„¯ì´ ìˆëŠ” ì´ˆìƒã€‹ (2019)
â€¢ ã€Šë¶€ì—‰ì´ê°€ ìˆëŠ” ì´ˆìƒã€‹ (2021)
â€¢ ã€Šë¹¨ê°„ ê½ƒì´ ìˆëŠ” ì´ˆìƒã€‹ (2020)

[ì£¼ìš” ê¸°ì¡´ ì‘í’ˆ]
â€¢ ã€Ší­í¬ã€‹ (2022) - ë¦¬ë„¨ì— ì†Œí”„íŠ¸ íŒŒìŠ¤í…”, 285 x 180 cm
â€¢ ã€Šê³¤ì¶©ì´ ìˆëŠ” ì¡°ê°ã€‹ (2019) - ê³ ë°€ë„ í´ë¦¬ìš°ë ˆíƒ„ í¼ì— ìœ ì±„

[í˜‘ì—… ê³ ë¯¸ìˆ  ì†Œì¥í’ˆ]
â€¢ ã€Šì‹­ì¥ìƒë„ 10ê³¡ë³‘ã€‹ (ì¡°ì„  18ì„¸ê¸° í›„ë°˜) - ë¹„ë‹¨Â·ì±„ìƒ‰, 210 Ã— 552.3 cm
â€¢ ê¹€í™ë„, ã€Šêµ°ì„ ë„ã€‹ (1776ë…„) - ì¢…ì´Â·ìˆ˜ë¬µë‹´ì±„, 132.8 x 575.8 cm (ë¦¬ì›€ë¯¸ìˆ ê´€ ì†Œì¥, êµ­ë³´)
â€¢ ã€Šë°±ì íƒœí˜¸ã€‹ (ì¡°ì„ ) - êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€, ì´ê±´í¬ íšŒì¥ ê¸°ì¦
â€¢ ã€Šê¸ˆë™ ìš©ë‘ë³´ë‹¹ã€‹ (ê³ ë ¤ 10-11ì„¸ê¸°) - ë¦¬ì›€ë¯¸ìˆ ê´€ ì†Œì¥, êµ­ë³´

[ì „ì‹œ í…Œë§ˆ: 'ë”ìŠ¤íŠ¸']
ì „ì‹œ ì œëª© 'ë”ìŠ¤íŠ¸'ëŠ” íŒŒìŠ¤í…” ê³ ìœ ì˜ íŠ¹ì„±ì„ íšŒí™”ì  ì¬í˜„ì˜ ì£¼ëœ ë°©ì‹ì´ì ì£¼ì œë¡œ ë°›ì•„ë“¤ì´ëŠ” íŒŒí‹°ì˜ ì‘í’ˆì„¸ê³„ì™€ ì—°ê³„ë©ë‹ˆë‹¤. ë§ˆì¹˜ 'ë‚˜ë¹„ ë‚ ê°œì˜ ì¸ë¶„(é±—ç²‰)ì²˜ëŸ¼' ì‰½ì‚¬ë¦¬ ê³µê¸° ì¤‘ìœ¼ë¡œ í©ì–´ì§€ëŠ” íŒŒìŠ¤í…”ì€ ì§€ê·¹íˆ ì—°ì•½í•˜ê³  ì¼ì‹œì ì¸ ì¬ë£Œì…ë‹ˆë‹¤.

[ì‘ê°€ì˜ ì² í•™]
â€¢ ë¯¸ìˆ ì‚¬ëŠ” ì˜ê°ì„ ìœ„í•œ ì†Œì¤‘í•œ ë³´ê³ (å¯¶åº«)ì´ì ì•„ì¹´ì´ë¸Œ
â€¢ ê³ ëŒ€ë¶€í„° ê·¼Â·í˜„ëŒ€ë¥¼ ì•„ìš°ë¥´ëŠ” ë¯¸ìˆ ì‚¬ì˜ ë‹¤ì–‘í•œ ì‘ê°€, ëª¨í‹°í”„, ì–‘ì‹, ì¬ë£Œ ë“±ì„ ììœ ë¡­ê²Œ ì°¸ì¡°
â€¢ 18ì„¸ê¸° ìœ ëŸ½ì—ì„œ ìœ í–‰í•œ ì´í›„ ìŠí˜€ì§„ íŒŒìŠ¤í…”í™”ë¥¼ ì†Œí™˜í•˜ì—¬ í’ê²½, ì •ë¬¼, ì´ˆìƒ ê°™ì€ íšŒí™”ì˜ ì „í†µ ì¥ë¥´ë¥¼ ì¬í•´ì„
â€¢ ì„ ëª…í•œ ìƒ‰, ë‹¨ìˆœí•œ í˜•íƒœ, ìƒê²½í•œ ì´ë¯¸ì§€ê°€ ì–´ìš°ëŸ¬ì§„ ì‘í’ˆ
â€¢ ê°€ë²¼ì›€ê³¼ ì‹¬ì˜¤í•¨, ìœ ë¨¸ì™€ ì§„ì§€í•¨ ì‚¬ì´ë¥¼ ë„˜ë‚˜ë“œëŠ” ì‘í’ˆì„¸ê³„

[íŒŒìŠ¤í…”ì˜ ì¡´ì¬ë¡ ì  ë¶ˆì•ˆì •ì„±]
íŒŒí‹°ì—ê²Œ íŒŒìŠ¤í…”í™”ëŠ” 'ë¨¼ì§€ë¡œ ì´ë£¨ì–´ì§„ ê°€ë©´(mask of dust)'ì´ì, í™”ì¥ê³¼ ê°™ì€ í™˜ì˜ì…ë‹ˆë‹¤. ë¯¸ìˆ ê´€ ë²½ì— ì§ì ‘ ê·¸ë¦¬ëŠ” ê±°ëŒ€í•œ íŒŒìŠ¤í…” ë²½í™”ëŠ” ì „ì‹œ ë™ì•ˆì—ë§Œ ì¡´ì¬í•˜ê³  ì‚¬ë¼ì§€ëŠ” ìš´ëª…ì„ ì§€ë‹™ë‹ˆë‹¤. ì´ëŸ¬í•œ íŒŒìŠ¤í…”ì˜ ì¡´ì¬ë¡ ì  ë¶ˆì•ˆì •ì„±ì„ ì¸ê°„ê³¼ ë¹„ì¸ê°„ ì¢…(ç¨®), ë¬¸ëª…ê³¼ ìì—°ì˜ ì§€ì†ê³¼ ì†Œë©¸ì— ëŒ€í•œ ì‚¬ìœ ë¡œ í™•ì¥í•©ë‹ˆë‹¤.

[ê³µê°„ ì—°ì¶œ]
í˜¸ì•”ë¯¸ìˆ ê´€ì˜ 1ì¸µê³¼ 2ì¸µì„ ë™ì¼í•œ êµ¬ì¡°ë¡œ ë§Œë“  íŒŒí‹°ëŠ” ì¢ì€ íšŒë‘ê³¼ ë„“ì€ ë°©ë“¤ë¡œ ë¯¸ë¡œ ê°™ì€ ê³µê°„ì„ ì—°ì¶œí•˜ê³ , ì¤‘ì„¸ ê±´ì¶•ê³¼ íšŒí™”ì˜ ëª¨í‹°í”„ì¸ ì•„ì¹˜ ë¬¸ê³¼ ë§ˆë¸” í˜ì¸íŒ…ì„ í™œìš©í•˜ì—¬ ë°©ê³¼ ë°©ì„ ì—°ê²°í•˜ëŠ” íŠ¹ë³„í•œ ê±´ì¶•ì  ê²½í—˜ì„ ì„ ì‚¬í•©ë‹ˆë‹¤.

[ë™ì„œê³ ê¸ˆì˜ ë¬¸í™”ì  ëŒ€í™”]
ë™êµ´ê³¼ ë°±ì íƒœí˜¸, ê½ƒ, ë²„ì„¯, ìš´ì„ê³¼ í•©ì²´ëœ ì¸ê°„, ë©¸ì¢…ëœ ê³µë£¡ê³¼ ìƒìƒì˜ ë™ë¬¼ ìš©, ë¶‰ì€ ìˆ²ê³¼ ì¿ë¹› êµ¬ë¦„ í’ê²½ ë“± ë™ì„œê³ ê¸ˆì˜ ë¬¸í™”ì  ìƒì§•ê³¼ ì¬í˜„ì„ ë’¤ì„ê³ , ë‚­ë§Œì£¼ì˜ì  ìˆ­ê³ ì™€ ì¬ë‚œì˜ ì´ë¯¸ì§€ë¥¼ êµì°¨ì‹œí‚µë‹ˆë‹¤.`,
      
      // ì‘ê°€ ì •ë³´
      artists: ['ë‹ˆì½œë¼ìŠ¤ íŒŒí‹° (Nicolas Party)'],
      curator: 'ê³½ì¤€ì˜ (ì „ì‹œê¸°íšì‹¤ì¥), ê¹€í˜œì—° (íë ˆì´í„°)',
      
      // ì‘í’ˆ ì •ë³´
      artworks_count: 73, // ê¸°ì¡´ ì‘í’ˆ 48ì  + ì‹ ì‘ 20ì  + ë²½í™” 5ì 
      
      // ê´€ëŒ ì •ë³´
      admission_fee: 'ë³„ë„ ê³µì§€',
      operating_hours: JSON.stringify({
        ìš´ì˜ì‹œê°„: 'í™”-ì¼ 10:00-18:00 (ì˜ˆìƒ)',
        íœ´ê´€ì¼: 'ë§¤ì£¼ ì›”ìš”ì¼ (ì˜ˆìƒ)',
        ì˜ˆì•½: 'ì „ì‹œì˜ˆì•½ í•„ìš”'
      }),
      
      // ì—°ë½ì²˜
      contact_info: JSON.stringify({
        ëŒ€í‘œ: '031-320-1801~2',
        ë¬¸ì˜: '031-320-1801',
        í™ˆí˜ì´ì§€: 'hoam.samsung.org',
        ì˜ˆì•½: 'ì „ì‹œì˜ˆì•½ ì‹œìŠ¤í…œ ì´ìš©'
      }),
      phone_number: '031-320-1801',
      
      // URL ì •ë³´
      official_url: 'https://hoam.samsung.org',
      website_url: 'https://hoam.samsung.org',
      
      // ë°ì´í„° ë©”íƒ€ì •ë³´
      source: 'hoam_official',
      source_url: 'https://hoam.samsung.org',
      collected_at: new Date().toISOString(),
      
      // ê¸°ë³¸ê°’ ì„¤ì •
      view_count: 0,
      ai_verified: true,
      ai_confidence: 0.95
    };

    // ë°ì´í„° ì…ë ¥
    console.log('ğŸ“ ì „ì‹œ ë°ì´í„° ì…ë ¥ ì¤‘...');
    const { data, error } = await supabase
      .from('exhibitions')
      .insert([exhibitionData])
      .select();
    
    if (error) {
      throw error;
    }
    
    console.log('âœ… ã€Šë‹ˆì½œë¼ìŠ¤ íŒŒí‹°: ë”ìŠ¤íŠ¸ã€‹ ì „ì‹œ ë°ì´í„° ì…ë ¥ ì™„ë£Œ!');
    console.log('\nğŸ“‹ ì…ë ¥ëœ ì „ì‹œ ì •ë³´:');
    console.log(`  - ID: ${data[0].id}`);
    console.log(`  - ì œëª©: ${data[0].title_local}`);
    console.log(`  - ë¶€ì œ: ${data[0].subtitle}`);
    console.log(`  - ì‘ê°€: ${data[0].artists.join(', ')}`);
    console.log(`  - ì¥ì†Œ: ${data[0].venue_name} (ì „ì‹œì‹¤ 1, 2)`);
    console.log(`  - ê¸°ê°„: ${data[0].start_date} ~ ${data[0].end_date}`);
    console.log(`  - ì‘í’ˆìˆ˜: ${data[0].artworks_count}ì  (ê¸°ì¡´ 48 + ì‹ ì‘ 20 + ë²½í™” 5)`);
    console.log(`  - ìƒíƒœ: ${data[0].status}`);
    console.log(`  - íë ˆì´í„°: ${data[0].curator}`);
    console.log(`  - íŠ¹ì§•: ë¦¬ì›€ë¯¸ìˆ ê´€ ê³ ë¯¸ìˆ  ì†Œì¥í’ˆê³¼ í˜‘ì—…`);
    
    // í˜¸ì•”ë¯¸ìˆ ê´€ í˜„ì¬ ì§„í–‰ ì „ì‹œ í™•ì¸
    console.log('\nğŸ” í˜¸ì•”ë¯¸ìˆ ê´€ í˜„ì¬ ì§„í–‰ì¤‘ì¸ ì „ì‹œ...');
    const today = new Date().toISOString().split('T')[0];
    const { data: ongoingExhibitions, error: ongoingError } = await supabase
      .from('exhibitions')
      .select('title_local, start_date, end_date, artists')
      .eq('venue_name', 'í˜¸ì•”ë¯¸ìˆ ê´€')
      .lte('start_date', today)
      .gte('end_date', today)
      .order('start_date', { ascending: true });
    
    if (!ongoingError && ongoingExhibitions) {
      console.log(`\nğŸ”„ í˜¸ì•”ë¯¸ìˆ ê´€ í˜„ì¬ ì§„í–‰ì¤‘: ${ongoingExhibitions.length}ê°œ`);
      ongoingExhibitions.forEach((ex, index) => {
        const artist = ex.artists && ex.artists.length > 0 ? `(${ex.artists[0]})` : '';
        console.log(`${index + 1}. ${ex.title_local} ${artist}`);
        console.log(`   ${ex.start_date} ~ ${ex.end_date}`);
      });
    }
    
    // í˜„ëŒ€ë¯¸ìˆ ê³¼ ê³ ë¯¸ìˆ  í˜‘ì—… ì „ì‹œ ê²€ìƒ‰
    console.log('\nğŸ” í˜„ëŒ€ë¯¸ìˆ  Ã— ê³ ë¯¸ìˆ  í˜‘ì—… ì „ì‹œ ê²€ìƒ‰...');
    const { data: collaborativeExhibitions, error: collaborativeError } = await supabase
      .from('exhibitions')
      .select('title_local, venue_name, start_date, end_date')
      .or('description.ilike.%ê³ ë¯¸ìˆ %,description.ilike.%ì†Œì¥í’ˆ%,description.ilike.%êµ­ë³´%,description.ilike.%í˜‘ì—…%,description.ilike.%ì¡°ì„ %')
      .order('start_date', { ascending: false });
    
    if (!collaborativeError && collaborativeExhibitions) {
      console.log(`\nğŸ¤ í˜„ëŒ€ë¯¸ìˆ  Ã— ê³ ë¯¸ìˆ  í˜‘ì—…: ${collaborativeExhibitions.length}ê°œ`);
      collaborativeExhibitions.slice(0, 5).forEach((ex, index) => {
        console.log(`${index + 1}. ${ex.title_local} (${ex.venue_name})`);
        console.log(`   ${ex.start_date} ~ ${ex.end_date}`);
      });
    }
    
    // íŒŒìŠ¤í…”/ë²½í™” ì „ì‹œ ê²€ìƒ‰
    console.log('\nğŸ” íŒŒìŠ¤í…”/ë²½í™” ê´€ë ¨ ì „ì‹œ ê²€ìƒ‰...');
    const { data: pastelExhibitions, error: pastelError } = await supabase
      .from('exhibitions')
      .select('title_local, venue_name, start_date, end_date')
      .or('description.ilike.%íŒŒìŠ¤í…”%,description.ilike.%ë²½í™”%,description.ilike.%ë”ìŠ¤íŠ¸%')
      .order('start_date', { ascending: false });
    
    if (!pastelError && pastelExhibitions) {
      console.log(`\nğŸ¨ íŒŒìŠ¤í…”/ë²½í™” ì „ì‹œ: ${pastelExhibitions.length}ê°œ`);
      pastelExhibitions.forEach((ex, index) => {
        console.log(`${index + 1}. ${ex.title_local} (${ex.venue_name})`);
        console.log(`   ${ex.start_date} ~ ${ex.end_date}`);
      });
    }
    
  } catch (error) {
    console.error('âŒ ë°ì´í„° ì…ë ¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error.message);
    if (error.details) console.error('ì„¸ë¶€ì‚¬í•­:', error.details);
  }
}

// ì‹¤í–‰
importHoamNicolasParty2024();